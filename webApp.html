<html>
    <head>
        <meta charset="utf-8"/>
        <meta name = "viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"/>
        <title> Intern Bridge QAQC WebApp</title>

        <!-- SET ESRI CSS SOURCE -->
        <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css"/>
        
        <!-- SET ESRI JS API SOURCE -->
        <script src="https://js.arcgis.com/4.26/"></script>
        
        <!-- CSS IN A STYLE TAG -->
        <style>
            html,
            body,
            #viewDiv {
                padding: 0;
                margin: 0;
                height: 100%;
                width: 100%;
            }
        </style>

        <!-- JS IN A SCRIPT TAG-->
        <script>
            // REQUIRE STATEMENT LOADS individual ESRI MODULES
            require(
                [
                    // MAP AND MAPVIEW
                    "esri/config",
                    "esri/Map",
                    "esri/views/MapView",
                    "esri/Basemap",

                    // LAYERS
                    "esri/layers/FeatureLayer",
                    "esri/layers/VectorTileLayer",

                    // OAUTH 2.0
                    "esri/identity/OAuthInfo",
                    "esri/identity/IdentityManager",           
                ],

                //LOAD MODULES INTO FUNCTION FOR USE IN THE APP
                function(esriConfig, Map, MapView, Basemap, FeatureLayer, VectorTileLayer, OAuthInfo, IdentityManager) {


                // HAVE TO HAVE API KEY TO ACCESS ARCGIS SERVICES
                esriConfig.apiKey = "AAPK47940bdbad24479c8e5cfc3285632cf0D6SI_0gce6ZC0zx7iGkSeVP7k66w2b23CD8OKRR1jRMFulXcBwmgjXjgUHmhXMNS";

                //SET UP OAUTH
                //const info = new OAuthInfo({
                    //REGISTERED APPLICATION ID
                    //appId: "91H8RXSUHGiUTCi9",
                    //flowType: "auto",
                    //popup: false
                //});

                //esriId.registerOAuthInfos([info]);


                //CREATE MAP WITH IMAGERY BASEMAP
                const map = new Map({
                    basemap: "arcgis-topographic" // CHANGING TO IMAGERY
                });


                // CREATE MAPVIEW
                const mapView = new MapView({
                    map: map,
                    center: [-100.341389, 31.132222],
                    zoom: 6,
                    container: "viewDiv"
                });

                // CONSTRUCT FEATURELAYERS
                const roadways = new FeatureLayer({
                    url: "https://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/TxDOT_Roadways/FeatureServer/0",
                    //legendEnabled: false,
                    //visible: true,
                    opacity: 0.0, // ADD LAYER BUT DO NOT SHOW
                    //popupEnabled: true,
                    //outFields: ["RTE_NM", "RDBD_TYPE", "MAP_LBL", "RTE_PRFX", "BEGIN_DFO", "END_DFO"],
                    //popupTemplate: roadwayTemplate,
                    //title: "Roadways"
                });

                const bridgeTest = new FeatureLayer({
                    url: "https://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/Bridge_TEST/FeatureServer/0?f=pjson&token=q6pZW0B6J-g4uDbpdfNtsLLmyOtxxbnyM1azgGoWrGMzSl_8fRtxsPnHJBljTNvOXfsIK2IbpbD1_RUHJOQ19Yj1A3AYHftvB1DBiB_f9tv5p6mcRYczgunf1gcWymObRR2JiJ6qiFjQd8nr26WNxPte5UtpjsyRqNBtHwNzqysZu1P0WQ6oH8ZKrhGN4kQMLTZ8GA35vJoGNMDn_DBr9prjVCe4S0b4cpcJMiKTKW0hE2AEeM9rfG_dKLji-3hM"
                })

                // ADD FEATURELAYER TO THE MAP
                map.add(roadways);
                map.add(bridgeTest);

            });
        </script>
    </head>

    <!--- AFTER THE HEAD COMES THE BODY WITHIN THE HTML BRACES-->
    <body>
        <div id="viewDiv"></div>
    </body>
</html>